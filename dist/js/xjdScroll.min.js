!function(t,e){"function"==typeof define&&define.amd?define(["exports"],e):"undefined"!=typeof exports?e(exports):(e(e={}),t.xjdScroll=e)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(t){"use strict";function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){function i(t,e){var r=this;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.dcm=document,this.cursorDown=!1,this.selectedThumb="",this.X=0,this.Y=0,this.horizontalMap={offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left",wrapperClient:"clientWidth",contentOffset:"offsetWidth"},this.verticalMap={offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top",wrapperClient:"clientHeight",contentOffset:"offsetHeight"},this.defultOption={height:"100%",width:"100%"},this.mouseMoveDocumentHandler=function(t){var e;!1!==r.cursorDown&&(e=(t[(t=r["".concat(r.selectedThumb,"Map")]).client]-r["".concat(r.selectedThumb,"Bar")].getBoundingClientRect()[t.direction]-(r["".concat(r.selectedThumb,"Bar")].children[0][t.offset]-r[t.axis]))/r["".concat(r.selectedThumb,"Bar")][t.offset],r.wrapper[t.scroll]=e*r.wrapper[t.scrollSize])},this.mouseUpDocumentHandler=function(){r.cursorDown=!1,r.dcm.removeEventListener("mousemove",r.mouseMoveDocumentHandler),r.dcm.removeEventListener("mouseup",r.mouseUpDocumentHandler),r.dcm.onselectstart=null},this.dom=t,this.wrapper=this.dom.childNodes[0],this.content=this.wrapper.childNodes[0],this.scrollbarWidth=this.getScrollbarWidth(),e&&(this.defultOption=Object.assign(Object.assign({},this.defultOption),e)),this.dom.style.cssText="height: ".concat(this.defultOption.height,";width: ").concat(this.defultOption.width,";"),this.wrapper.style.cssText="height: calc(100% + ".concat(this.scrollbarWidth,"px);margin-right: -").concat(this.scrollbarWidth,"px;margin-bottom: -").concat(this.scrollbarWidth,"px"),this.init()}var t,e,r;return t=i,(e=[{key:"getScrollbarWidth",value:function(){var t=this.dcm.createElement("div"),e=(t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",this.dcm.body.appendChild(t),t.offsetWidth-t.clientWidth);return this.dcm.body.removeChild(t),e}},{key:"hasScrollbar",value:function(){return{vertical:this.content.scrollHeight>this.wrapper.clientHeight,horizontal:this.content.scrollWidth>this.wrapper.clientWidth}}},{key:"createBar",value:function(e){var r,t,i,o=this;{if("vertical"===e||"horizontal"===e)return r=this["".concat(e,"Map")],t=this.dcm.createElement("div"),i=this.dcm.createElement("div"),t.setAttribute("class"," myScroll__".concat(e,"Bar")),t.addEventListener("mousedown",function(t){t=(Math.abs(t.currentTarget.getBoundingClientRect()[r.direction]-t[r.client])-o["".concat(e,"Bar")].children[0][r.offset]/2)/o["".concat(e,"Bar")][r.offset];o.wrapper[r.scroll]=t*o.wrapper[r.scrollSize]}),i.setAttribute("class","myScroll__thumb"),i.style.cssText=this.renderThumbStyle("0","".concat(this.wrapper[r.wrapperClient]/this.content[r.contentOffset]*100,"%"),r),i.addEventListener("mousedown",function(t){t.stopImmediatePropagation(),window.getSelection().removeAllRanges(),o.selectedThumb=e,o.cursorDown=!0,o.dcm.addEventListener("mousemove",o.mouseMoveDocumentHandler),o.dcm.addEventListener("mouseup",o.mouseUpDocumentHandler),o.dcm.onselectstart=function(){return!1},o[r.axis]=t.currentTarget[r.offset]-t[r.client]+t.currentTarget.getBoundingClientRect()[r.direction]}),t.appendChild(i),t;console.log("type must be 'vertical' or 'horizontal'")}}},{key:"deleteBar",value:function(){if(1!==this.dom.children.length){for(var t=1,e=this.dom.children.length;t<e;t++)this.dom.removeChild(this.dom.children[1]);this.verticalBar=null,this.horizontalBar=null}}},{key:"renderThumbStyle",value:function(t,e,r){t="translate".concat(r.axis,"(").concat(t,"%)");return"".concat([r.size],": ").concat(e,";transform: ").concat(t,";-webkit-transform: ").concat(t,";-ms-transform: ").concat(t,";")}},{key:"init",value:function(){var r=this;this.refresh(),this.wrapper.scrollTop=0,this.wrapper.scrollLeft=0,this.dom.addEventListener("mouseover",function(){r.verticalBar&&(r.verticalBar.style.opacity="1"),r.horizontalBar&&(r.horizontalBar.style.opacity="1")}),this.dom.addEventListener("mouseleave",function(){!0!==r.cursorDown&&(r.verticalBar&&(r.verticalBar.style.opacity=""),r.horizontalBar&&(r.horizontalBar.style.opacity=""))}),this.wrapper.addEventListener("scroll",function(t){var e;r.verticalBar&&(e=r.verticalMap,r.verticalBar.childNodes[0].style.cssText=r.renderThumbStyle("".concat(t.currentTarget[e.scroll]/r.wrapper[e.wrapperClient]*100),"".concat(r.wrapper[e.wrapperClient]/r.content[e.contentOffset]*100,"%"),e)),r.horizontalBar&&(e=r.horizontalMap,r.horizontalBar.childNodes[0].style.cssText=r.renderThumbStyle("".concat(t.currentTarget[e.scroll]/r.wrapper[e.wrapperClient]*100),"".concat(r.wrapper[e.wrapperClient]/r.content[e.contentOffset]*100,"%"),e))})}},{key:"refresh",value:function(){this.deleteBar(),this.X=0,this.Y=0,this.selectedThumb="",this.cursorDown=!1;var t=this.hasScrollbar();t.vertical&&t.horizontal?(this.verticalBar=this.createBar("vertical"),this.horizontalBar=this.createBar("horizontal"),this.verticalBar.style.cssText="bottom: 12px;",this.horizontalBar.style.cssText="right: 12px;",this.dom.appendChild(this.verticalBar),this.dom.appendChild(this.horizontalBar)):t.vertical?(this.verticalBar=this.createBar("vertical"),this.dom.appendChild(this.verticalBar)):t.horizontal?(this.horizontalBar=this.createBar("horizontal"),this.dom.appendChild(this.horizontalBar)):this.deleteBar()}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();(t.default=e).version="1.2.0"});